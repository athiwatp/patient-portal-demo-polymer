<html><head><link rel="import" href="../polymer/polymer.html">

</head><body><dom-module id="vaadin-grid-table-focus-trap">
  <template>
    <style>
     :host(:focus),
     .primary:focus,
     ::content .primary:focus,
     .secondary:focus,
     ::content .secondary:focus {
       outline: none;
     }
    </style>

    <!-- trap needs to have content in order for Safari to scroll the page when focused -->
    <div class="primary" tabindex="0" role="gridcell" on-focus="_onFocusin" on-blur="_onFocusout"><div style="position:absolute;z-index:1;" aria-hidden="true">&nbsp;</div></div>
    <div class="secondary" tabindex="-1" role="gridcell" on-focus="_onFocusin" on-blur="_onFocusout"><div style="position:absolute;z-index:1;" aria-hidden="true">&nbsp;</div></div>

    <slot></slot>
  </template>
  <script>Polymer({is:"vaadin-grid-table-focus-trap",hostAttributes:{tabindex:-1,role:"gridcell"},listeners:{focus:"_onFocus"},properties:{activeTarget:{type:String,observer:"_activeTargetChanged"}},ready:function(){this._primary=Polymer.dom(this.root).querySelector(".primary"),this._secondary=Polymer.dom(this.root).querySelector(".secondary"),Polymer.Settings.useNativeShadow&&(Polymer.dom(this).appendChild(this._primary),Polymer.dom(this).appendChild(this._secondary))},_onFocus:function(t){this._primary.focus()},_onFocusin:function(t){this.fire("focusin"),this._focused=t.target},_onFocusout:function(t){this.fire("focusout")},_activeTargetChanged:function(t){this._focused===this._primary?(this._secondary.setAttribute("aria-labelledby",t),this._secondary.focus()):(this._primary.setAttribute("aria-labelledby",t),this._primary.focus())}});</script>
</dom-module>
</body></html>