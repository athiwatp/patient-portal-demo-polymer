<html><head></head><body><dom-module id="vaadin-grid-column-reordering-themability-styles">
  <template>
    <style>
      :host([reordering]) .vaadin-grid-cell {
        background: #000;
      }

      :host([reordering]) .vaadin-grid-cell:not([detailscell]) ::content > .cell-content {
        transition: opacity 300ms;
        transform: translateZ(0);
        opacity: 0.8;
      }

      .vaadin-grid-cell[reorder-status="allowed"] ::content > .cell-content.cell-content {
        opacity: 1;
      }

      .vaadin-grid-cell[reorder-status="dragging"] {
        background: var(--primary-color, #000);
      }

      .vaadin-grid-cell[reorder-status="dragging"] ::content > .cell-content.cell-content {
        opacity: 0.95;
      }
    </style>
  </template>
</dom-module>

<script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ColumnReorderingBehavior={properties:{columnReorderingAllowed:{type:Boolean,value:!1}}},vaadin.elements.grid.TableColumnReorderingBehavior={properties:{_orderBaseScope:{type:Number,value:1e7}},listeners:{dragstart:"_onDragStart",dragover:"_onDragOver",dragend:"_onDragEnd"},observers:["_updateOrders(columnTree, columnTree.*)"],_updateOrders:function(e,t){e[0].forEach(function(e,t){e._order=(t+1)*this._orderBaseScope},this)},_onDragStart:function(e){var t=this._getCellByCellContent(e.target);t&&(this.toggleAttribute("reordering",!0),this._draggedColumn=t.column,this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",e.dataTransfer&&(e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed="move"),this._autoScroller())},_setSiblingsReorderStatus:function(e,t){Polymer.dom(Polymer.dom(e).parentNode).children.filter(function(t){return/column/.test(t.localName)&&this._isSwapAllowed(t,e)},this).forEach(function(e){e._reorderStatus=t})},_onDragOver:function(e){e.preventDefault();var t=this._getCellByCellContent(e.target),r=this._getTargetColumn(t,this._draggedColumn);r&&this._isSwapAllowed(this._draggedColumn,r)&&this._isSwappableByPosition(r,e.clientX)&&this._swapColumnOrders(this._draggedColumn,r),this._lastDragClientX=e.clientX},_autoScroller:function(){if(this._lastDragClientX){var e=this._lastDragClientX-this.getBoundingClientRect().right+50,t=this.getBoundingClientRect().left-this._lastDragClientX+50;e>0?this.$.table.scrollLeft+=e/10:t>0&&(this.$.table.scrollLeft-=t/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)},_onDragEnd:function(e){this.toggleAttribute("reordering",!1),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null},_isSwapAllowed:function(e,t){if(e&&t){var r=e!==t,n=e.parentElement===t.parentElement,l=e.frozen===t.frozen;return r&&n&&l}},_isSwappableByPosition:function(e,t){var r=Polymer.dom(this.$.header).querySelectorAll("th").filter(function(t){return t.column===e})[0],n=this.$.header.querySelector("[reorder-status=dragging]").getBoundingClientRect();return r.getBoundingClientRect().left>n.left?t>r.getBoundingClientRect().right-n.width:t<r.getBoundingClientRect().left+n.width},_getCellByCellContent:function(e){if(e){for(var t=null;null===t&&e!==this.target&&e;)t=e.getAttribute("data-cell-content-id"),e=e.parentElement;if(null!==t){var r=Polymer.dom(this.$.table).querySelectorAll("content").filter(function(e){return e.getAttribute("select")==='[data-cell-content-id="'+t+'"]'})[0];return Polymer.dom(r).parentNode}}},_swapColumnOrders:function(e,t){var r=e._order;e._order=t._order,t._order=r,this._updateLastFrozen(),this._updateLastColumn()},_getTargetColumn:function(e,t){if(e&&t){for(var r=e.column;r.parentElement!==t.parentElement&&r!==this.target;)r=r.parentElement;return r.parentElement===t.parentElement?r:e.column}}};</script>
</body></html>